"use strict";angular.module("commitCloudApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","angular-jqcloud"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/repositories",{templateUrl:"views/repositories.html",controller:"RepositoriesCtrl",controllerAs:"repositories"}).when("/cloud",{templateUrl:"views/cloud.html",controller:"CloudCtrl",controllerAs:"cloud"}).otherwise({redirectTo:"/"})}]),angular.module("commitCloudApp").controller("MainCtrl",["$rootScope","$scope","$location","$route","Github",function(a,b,c,d,e){b.username="",b.ok=function(){e.getUser().show(b.username,function(b,e){b||(a.user=e,c.path("/repositories"),d.reload())})}}]),angular.module("commitCloudApp").controller("RepositoriesCtrl",["$rootScope","$scope","$location","$route","Github",function(a,b,c,d,e){e.getUser().userRepos(a.user.login,function(a,c){a||(b.repositories=c,b.$apply())}),b.username=a.user.login,b.cloud=function(b,e){a.author=b,a.repository=e,c.path("/cloud"),d.reload()}}]),angular.module("commitCloudApp").controller("CloudCtrl",["$rootScope","$scope","Github",function(a,b,c){c.getRepo(a.author,a.repository).getCommits({perpage:100},function(c,d){if(!c){var e=7,f=_.map(d,function(a){return a.commit.message.split(" ")});f=_.flatten(f),f=_.countBy(f,function(a){return a.toLowerCase()}),f=_.map(f,function(a,b){return e=a>e?a:e,{text:b,weight:a}}),b.steps=e,b.repository=a.repository,b.words=f,b.$apply()}})}]),angular.module("commitCloudApp").factory("Github",function(){return new Github({username:"commitcloud",password:"commitcloud@1;",auth:"basic"})}),angular.module("commitCloudApp").run(["$templateCache",function(a){a.put("views/cloud.html",'<div class="container"> <h1>{{repository}}</h1> <h2>Cloud</h2> <center> <jqcloud words="words" width="600" height="480" steps="steps"></jqcloud> </center> </div>'),a.put("views/main.html",'<div class="row"> <div class="col-lg-12 text-center v-center"> <h1>Commit Cloud</h1> <p class="lead">How make fun of commit messages of GitHub repositories</p> <br><br><br> <form class="col-lg-12"> <div class="input-group" style="width:340px;text-align:center;margin:0 auto"> <input class="form-control input-lg" placeholder="Enter your GitHub username" type="text" ng-model="username"> <span class="input-group-btn"><button class="btn btn-lg" type="submit" ng-click="ok()">OK</button></span> </div> </form> </div> </div> <div class="row"> <div class="col-lg-12 text-center v-center"> <a href="https://github.com/yibnl/CommitCloud"><img src="images/github.6c9dd8ad.png"></a> </div> </div> <br><br><br><br><br>'),a.put("views/repositories.html",'<div class="container"> <h1>{{username}}</h1> <h2>Repositories</h2> <div class="row"> <div class="col-sm-6 col-md-4" ng-repeat="repo in repositories | orderBy:[\'name\']"> <div class="thumbnail"> <img src="images/repository.344cb4c2.png"> <div class="caption"> <h3>{{repo.name}}</h3> <p>{{repo.description}}</p> <p>Created on {{repo.created_at}}</p> <p>By {{repo.owner.login}}</p> <p><a href="{{repo.html_url}}" role="button">Repository Link</a> <a href="" class="pull-right" role="button" ng-click="cloud(repo.owner.login, repo.name)" style="position:absolute;bottom:20px;right:20px;margin:0;padding:5px 3px"><img src="images/cloud.7d3c40e0.png"></a></p> </div> </div> </div> </div> </div>')}]);